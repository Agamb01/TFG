%---------------------------------------------------------------------
%
%                     Capítulo Pruebas para correccion
%
%---------------------------------------------------------------------

\chapter{Titulo por definir}
\label{cap2A}

\begin{FraseCelebre}
  \begin{Frase}
    "`La verdadera ciencia enseña, sobre todo, a dudar y a ser ignorante."' 
  \end{Frase}
  \begin{Fuente}
    Ernest Rutherford 
  \end{Fuente}
\end{FraseCelebre}

\begin{resumen}
En este capítulo se define con detalle lo que es un procesador y su importancia en el mundo de hoy en día. También se tratan dos arquitectura más concretas, la arquitectura DLX y la arquitectura ARM.

A continuación se define qué es un fallo y qué tipos de fallos pueden ocurrir en los sistemas. Además se explican algunas técnicas de tolerancia a fallos.

Para terminar, se justifica la importancia de la tolerancia en los sistemas y concretamente porqué es necesaria la tolerancia en los microprocesadores.
\end{resumen}

%%-----------------------------------------------------------------
\section{Tolerancia a Fallos}
%%-----------------------------------------------------------------
\label{cap2A:tolerancia}

La tolerancia a fallos se define como la capacidad de un sistema de funcionar correctamente incluso si se produce un fallo o anomalía en el sistema. 

En ocasiones se producen fallos que no llegan a propagarse por el sitema y no producen errores en su funcionamiento, esto ocurre cuando los cambios realizados por los fallos se ven enmascarados. Puede deberse a alguna de las siguientes razones:

\begin{itemize}

  \item \textbf{Enmascarado lógico}
	
	Se evita el error en una puerta lógica, gracias a que el valor del dato no es necesario para estimar la salida. En la figura \ref{fig:A_Logical_masking} vemos que el valor de la señal invertida es indiferente para calcular el resultado ya que el resultado de una puerta "`or"' es "`1"' siempre que una de sus entradas sea "`1"'.
	
	\begin{figure}[htbp]
		\centering
			\includegraphics[width=0.75\textwidth]{Imagenes/SEU/Logical_masking.jpg}
		\caption{Fallo enmascarado por una puerta lógica.}
		\label{fig:A_Logical_masking}
	\end{figure}

	\item \textbf{Enmascarado eléctrico}
	
	El fallo producido pierde intensidad en el recorrido lógico y no tiene efecto al llegar al elemento de memoria que lo almacenaría. Figura \ref{fig:A_Electrical_masking}.
	
	\begin{figure}[htbp]
		\centering
			\includegraphics[width=0.75\textwidth]{Imagenes/SEU/Electrical_masking.jpg}
		\caption{Fallo enmascarado eléctricamente.}
		\label{fig:A_Electrical_masking}
	\end{figure}

	\item \textbf{Enmascarado temporal}
	
	El fallo se propaga con suficiente energía hasta el biestable, sin embargo, ocurre fuera de la de la ventana crítica de tiempo y la señal puede estabilizarse a su valor correcto antes de almacenarse en el biestable Figura \ref{fig:A_Latching_masking}.

	\begin{figure}[htbp]
		\centering
			\includegraphics[width=0.75\textwidth]{Imagenes/SEU/Latching_masking.jpg}
		\caption{Fallo enmascarado por ventana de tiempo.}
		\label{fig:A_Latching_masking}
	\end{figure}

\end{itemize}

Hay diferentes grados de tolerancia que dependen de la aplicación del sistema:

\begin{itemize}

  \item \textbf{Tolerancia completa  (fail operational)}
  
	El sistema puede seguir funcionando sin perder funcionalidad ni prestaciones.
	
  \item \textbf{Degradación aceptable (failsoft)}
  
	El sistema continua funcionando parcialmente hasta la reparación del fallo.
	
  \item \textbf{Parada segura (failsafe)}
  
	El sistema se detiene en un estado seguro hasta que se repare el fallo.
	
\end{itemize}


La tolerancia a fallos hardware se trata principalmente aplicando la redundancia de uno o varios de los siguientes tipos:


%%-----------------------------------------------------------------
\subsection{Redundancia en la información}
%%-----------------------------------------------------------------
\label{cap2A:tolerancia:informacion}

La redundancia de datos se basa en mantener varias copias de todos los datos en diferentes ubicaciones junto a códigos de detección y corrección de errores. La replicación de datos consigue que la perdida o daño de una memoria no implique la perdida de los datos que almacena. Los códigos de detección y corrección permiten comprobar los datos en busca de errores y corregir los datos si fuese necesario.

El ejemplo más claro de este tipo de tolerancia es el conocido como \textit{conjunto redundante de discos independientes} o \textit{redundant array of independent disks (RAID)}. Las diferentes clases de RAID proporcionan un acceso a los datos rápido y transparente para el sistema operativo [\cite{Torrecillas}]. Por ejemplo:

\begin{itemize}
  \item \textbf{RAID 1:} Se basa en la utilización de discos adicionales sobre los que se realiza una copia de los datos que se están modificando. 
  \item \textbf{RAID 5:} Reparte la información en bloques con bits de paridad, que se guardan en diferentes discos.
\end{itemize}


%%-----------------------------------------------------------------
\subsection{Redundancia en el tiempo}
%%-----------------------------------------------------------------
\label{cap2A:tolerancia:tiempo}

La redundancia en el tiempo es efectiva contra los fallos transitorios. Esta consiste en ejecutar parte de un programa o el programa completo varias veces. Los fallos transitorios, como se ha explicado anteriormente, se producen en zonas aleatorias del chip, siendo poco probable que aparezca el mismo error en el mismo lugar.

Este tipo de redundancia requiere una menor cantidad de hardware y de software, pero requiere ejecutar varias veces el programa, reduciendo el rendimiento del sistema.

Algunas técnicas de redundancia en el tiempo se basan en "`puntos de control"' o "`checkpoints"'. Estas técnicas requieren almacenar los datos con los que se está trabajando cada cierto tiempo, creando un "`punto de control"', esto permite que al detectar un error se pueda recurrir al último "`checkpoint"' en vez de reiniciar el programa completo \cite{Kadav2013}.


%%-----------------------------------------------------------------
\subsection{Redundancia en el hardware}
%%-----------------------------------------------------------------
\label{cap2A:tolerancia:hardware}

La redundancia hardware se basa en la inserción de módulos extra para la detección y corrección de los fallos. Aunque su objetivo es el de reducir el número de fallos que provocan errores, la inserción de módulos extra implica un aumento en la complejidad del sistema, con ello aumenta la posible aparición de nuevos fallos.

El tolerancia con hardware redundante se clasifica en:

\begin{itemize}
  \item \textbf{Tolerancia estática:} Se consigue con varias unidades que realizan la misma función en paralelo.
  \item \textbf{Tolerancia dinámica:} Hay una unidad en funcionamiento y varias de repuesto para sustituirla si fuera necesario.
  \item \textbf{Tolerancia híbrida:} Combinan tolerancia estática con tolerancia dinámica.
\end{itemize}

Algunas técnicas se detallan a continuación \cite{Kirrmann2005}.

%%-----------------------------------------------------------------
\subsubsection{Redundancia modular n-ésima}
%%-----------------------------------------------------------------
\label{cap2A:tolerancia:hardware:nmr}






%%-----------------------------------------------------------------
\subsubsection{Re-configuración}
%%-----------------------------------------------------------------
\label{cap2A:tolerancia:hardware:reconfiguracion}

La re-configuración de un sistema consiste en cambiar su implementación en el momento deseado. Por ejemplo, cuando nuestro sistema empieza a fallar debido a que parte del chip se ha dañado, en vez de eliminar el chip y sustituirlo por otro, se puede configurar el mismo circuito de manera que evite usar las partes dañadas.

En el apartado \ref{cap2A:fpga} de este mismo capitulo se han introducido las FPGAs, sistemas re-programables que permiten al diseñador re-configurar su estructura para realizar diferentes tareas, o la misma con una nueva implementación u organización de los componentes.

En la imagen \ref{fig:A_parcial_dinamica} podemos ver un ejemplo de re-configuración, concretamente de re-configuración dinámica parcial.

Hay dos formas de aplicar la re-configuración a un sistema \cite{carlos2014}:
\begin{itemize}

	\item Re-configuración estática

    Aquella que requiere parar el sistema completamente e iniciarlo con la nueva configuración.

	\item Re-configuración dinámica

    Aquella que en tiempo de ejecución es capaz de sustituir parcial o completamente el diseño del sistema.

\end{itemize}

\begin{figure}
	\centering
		\includegraphics[width=\textwidth]{Imagenes/Tolerancia/parcial_dinamica.eps}
	\caption{Tolerancia dinámica parcial \cite{States2011}.}
	\label{fig:A_parcial_dinamica}
\end{figure}


%%-----------------------------------------------------------------
\subsection{Tolerancia en microprocesadores}
%%-----------------------------------------------------------------
\label{cap2A:tolerancia:microprocesadores}

...
